[pytest]

# AnyIO runner is used (@pytest.mark.anyio)
# Limit default test discovery to the tests/ package
testpaths = tests
addopts = -q

markers =
    anyio: mark test as using anyio for async I/O
    exit_sprint1: Sprint 1 exit gate tests (must all pass before Sprint 2)
    exit_sprint2: Sprint 2 exit gate tests (must all pass before Sprint 3)
    exit_sprint3: Sprint 3 exit gate tests (must all pass before Sprint 4)
    exit_multitenant_v1: Multitenant foundation v1 (tenant resolution & isolation)
    exit_storefront_v1: Storefront public API v1
    exit_pricing_engine_v1: Pricing engine v1
    exit_pricing_audit_v1: Pricing audit v1
    exit_pricing_rules_admin_v1: Pricing rules admin v1
    exit_marketplace_v1: Marketplace v1
    exit_marketplace_bridge_v1: Marketplace to storefront bridge v1
    exit_b2b_booking_create_v1: B2B booking create v1
    exit_supplier_fulfilment_v1: B2B supplier fulfilment v1 gate
    exit_supplier_adapter_registry: Supplier adapter registry v1 gate
    exit_supplier_confirm_flow: Supplier confirm flow v1 gate
    exit_supplier_unresolved: Supplier unresolved error handling v1 gate
    exit_supplier_not_supported: Supplier not-supported flow v1 gate
    exit_supplier_error_propagation: Supplier error propagation v1 gate
    exit_canonical_schema_enforced: Canonical offers schema enforcement v1 gate
    exit_supplier_response_no_leak: Canonical offers no supplier raw leakage v1 gate
    exit_search_cache_ttl: Canonical offers search session TTL/indexes v1 gate
    exit_offer_token_booking_draft: Booking draft creation from canonical offer v1 gate
    exit_confirm_timeout_enforced: Supplier confirm timeout enforcement v1 gate
    exit_confirm_snapshot_redacted: Supplier confirm snapshot redaction v1 gate
    exit_b2b_pricing_overlay_applied: B2B pricing overlay applied on canonical offers v1 gate
    exit_b2b_pricing_no_rule: B2B pricing overlay default behaviour when no rules v1 gate
    exit_booking_repricing_consistency: Booking repricing consistency with canonical offers v1 gate
